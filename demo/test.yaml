name: add-nodeselector
policies:
  - policy.yaml
resources:
  - resource.yaml
results:
  - policy: add-label
    rule: add-label
    resource: pod-matches-for-clusterpolicy
    patchedResource: patch1.yaml
    kind: Pod
    namespace: notinpolicyns
    result: pass
  - policy: add-label
    rule: add-label
    resource: pod-matches-for-both-policy
    patchedResource: patch2.yaml
    kind: Pod
    namespace: sameaspolicyns
    result: pass

  - policy: sameaspolicyns/add-ndots
    rule: add-ndots
    resource: pod-matches-for-clusterpolicy
    namespace: notinpolicyns
    patchedResource: patch1.yaml
    kind: Pod
    result: skip
  - policy: sameaspolicyns/add-ndots
    rule: add-ndots
    resource: pod-matches-for-both-policy
    patchedResource: patch2.yaml
    namespace: sameaspolicyns
    kind: Pod
    result: pass


  - policy: add-label
    rule: add-label
    resource: myapp-pod
    patchedResource: patch3.yaml
    kind: Pod
    namespace: sameaspolicyns
    result: pass
  - policy: add-label
    rule: add-label
    resource: myapp-pod 
    patchedResource: patch4.yaml
    namespace: notinpolicyns
    kind: Pod
    result: pass

  - policy: sameaspolicyns/add-ndots
    rule: add-ndots
    resource: myapp-pod
    namespace: sameaspolicyns
    patchedResource: patches3.yaml
    kind: Pod
    result: pass
  - policy: sameaspolicyns/add-ndots
    rule: add-ndots
    resource: myapp-pod
    patchedResource: patches4.yaml
    namespace: notinpolicyns
    kind: Pod
    result: skip


  - policy: add-label
    rule: add-label
    resource: myapp-pod
    patchedResource: patch5.yaml
    kind: Deployment
    namespace: sameaspolicyns
    result: pass
  - policy: add-label
    rule: add-label
    resource: myapp-pod
    patchedResource: patch6.yaml
    namespace: notinpolicyns
    kind: Deployment
    result: pass

  - policy: sameaspolicyns/add-ndots
    rule: add-ndots
    resource: myapp-pod
    namespace: sameaspolicyns
    patchedResource: patches5.yaml
    kind: Deployment
    result: pass
  - policy: sameaspolicyns/add-ndots
    rule: add-ndots
    resource: myapp-pod
    patchedResource: patches6.yaml
    namespace: notinpolicyns
    kind: Deployment
    result: skip

  

  